<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TechBrain: Quiz Interativo</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0; padding: 0;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #121212;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      padding: 20px;
    }

    .app-container {
      width: 100%;
      max-width: 600px;
      background: rgba(0, 0, 0, 0.7);
      border-radius: 20px;
      box-shadow: 0 0 15px #000;
      text-align: center;
      position: relative;
      padding: 20px;
    }

    header h1 {
      font-size: 2.2em;
      margin-bottom: 15px;
    }

    .status {
      display: flex;
      justify-content: space-around;
      margin-bottom: 15px;
      font-size: 1.2em;
      user-select: none;
    }

    .screen {
      display: none;
    }
    .screen.active {
      display: block;
    }

    #answers {
      list-style: none;
      margin: 20px 0;
      padding: 0;
      text-align: left;
    }

    #answers li {
      background: #222;
      margin: 8px 0;
      padding: 12px 15px;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      border: 2px solid transparent;
      font-size: 1.1em;
    }

    #answers li:hover {
      background: #333;
      transform: scale(1.03);
    }

    #answers li.selected {
      background: #2575fc;
      border-color: #6a11cb;
      color: #fff;
      font-weight: bold;
    }

    #answers li.correct {
      background: #4caf50;
      border-color: #388e3c;
      color: #fff;
      cursor: default;
      transform: none;
    }

    #answers li.wrong {
      background: #e53935;
      border-color: #b71c1c;
      color: #fff;
      cursor: default;
      transform: none;
    }

    button {
      background: linear-gradient(to right, #2575fc, #6a11cb);
      border: none;
      color: white;
      padding: 12px 28px;
      border-radius: 20px;
      font-size: 1.1em;
      cursor: pointer;
      margin-top: 15px;
      user-select: none;
      transition: background 0.3s;
    }
    button:disabled {
      background: #555;
      cursor: not-allowed;
    }

    .progress-bar {
      height: 10px;
      background: #444;
      border-radius: 10px;
      margin-top: 20px;
      overflow: hidden;
    }

    #progress {
      height: 100%;
      width: 0%;
      background: #4caf50;
      border-radius: 10px;
      transition: width 0.3s ease-in-out;
    }

    .timer-bar {
      width: 100%;
      height: 15px;
      background: #222;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 10px;
      box-shadow: inset 0 0 10px #000;
    }

    #time-fill {
      width: 100%;
      height: 100%;
      background: limegreen;
      transition: width 1s linear, background-color 0.5s;
    }

    #time-warning {
      color: #ff4444;
      font-weight: bold;
      margin-top: 10px;
      animation: pulse 1s infinite;
      user-select: none;
    }

    .hidden {
      display: none;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.4; }
      100% { opacity: 1; }
    }

    #mascot {
      position: absolute;
      bottom: -20px;
      right: -10px;
      font-size: 40px;
      user-select: none;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header>
      <h1>üß† TechBrain</h1>
      <div class="status">
        <div id="lives">‚ù§‚ù§‚ù§</div>
        <div id="timer">‚è± 30s</div>
        <div id="score">Pontos: 0</div>
      </div>
      <div class="timer-bar">
        <div id="time-fill"></div>
      </div>
      <p id="time-warning" class="hidden">‚ö† Tempo est√° acabando!</p>
    </header>

    <main>
      <section id="start-screen" class="screen active">
        <h2>Bem-vindo ao TechBrain!</h2>
        <p>Escolha a categoria e dificuldade para come√ßar:</p>
        <select id="category">
          <option value="programacao">Programa√ß√£o</option>
          <option value="informatica">Inform√°tica B√°sica</option>
        </select>
        <select id="difficulty">
          <option value="facil">F√°cil</option>
          <option value="medio">M√©dio</option>
          <option value="dificil">Dif√≠cil</option>
        </select>
        <button id="start-btn">Iniciar Quiz</button>
      </section>

      <section id="quiz-screen" class="screen">
        <div id="question-box">
          <h2 id="question"></h2>
          <ul id="answers"></ul>
        </div>
        <button id="next-btn" disabled>Pr√≥xima</button>
        <div id="explanation" class="hidden"></div>
        <div class="progress-bar">
          <div id="progress"></div>
        </div>
      </section>

      <section id="end-screen" class="screen">
        <h2>üèÅ Quiz Finalizado!</h2>
        <p id="final-score"></p>
        <p id="ranking"></p>
        <button id="restart-btn">Jogar Novamente</button>
      </section>
    </main>

    <div id="mascot" class="mascot">üòê</div>
    <audio id="tense-sound" src="https://cdn.pixabay.com/download/audio/2022/03/16/audio_a8324aa01e.mp3?filename=suspense-3-21897.mp3"></audio>
  </div>

<script>
  const startBtn = document.getElementById('start-btn');
  const restartBtn = document.getElementById('restart-btn');
  const startScreen = document.getElementById('start-screen');
  const quizScreen = document.getElementById('quiz-screen');
  const endScreen = document.getElementById('end-screen');

  const questionEl = document.getElementById('question');
  const answersEl = document.getElementById('answers');
  const nextBtn = document.getElementById('next-btn');
  const explanationEl = document.getElementById('explanation');

  const livesEl = document.getElementById('lives');
  const timerEl = document.getElementById('timer');
  const timeFillEl = document.getElementById('time-fill');
  const timeWarningEl = document.getElementById('time-warning');
  const scoreEl = document.getElementById('score');
  const mascotEl = document.getElementById('mascot');
  const tenseSound = document.getElementById('tense-sound');

  let questions = {
    programacao: {
      facil: [
        {
          question: "Qual √© a linguagem de marca√ß√£o usada para criar p√°ginas web?",
          answers: [
            { text: "CSS", correct: false },
            { text: "JavaScript", correct: false },
            { text: "HTML", correct: true },
            { text: "Python", correct: false }
          ],
          explanation: "HTML √© a linguagem usada para estruturar p√°ginas web."
        },
        {
          question: "Qual linguagem √© usada para estilizar p√°ginas web?",
          answers: [
            { text: "HTML", correct: false },
            { text: "CSS", correct: true },
            { text: "Python", correct: false },
            { text: "JavaScript", correct: false }
          ],
          explanation: "CSS √© usada para estilizar p√°ginas web."
        },
        {
          question: "Qual linguagem adiciona interatividade √†s p√°ginas web?",
          answers: [
            { text: "JavaScript", correct: true },
            { text: "HTML", correct: false },
            { text: "CSS", correct: false },
            { text: "PHP", correct: false }
          ],
          explanation: "JavaScript adiciona interatividade √†s p√°ginas."
        }
      ],
      medio: [
        {
          question: "O que significa 'API' em programa√ß√£o?",
          answers: [
            { text: "Application Programming Interface", correct: true },
            { text: "Automated Programming Internet", correct: false },
            { text: "Applied Program Instruction", correct: false },
            { text: "Active Programming Interface", correct: false }
          ],
          explanation: "API significa Application Programming Interface."
        },
        {
          question: "Qual dos seguintes √© um banco de dados relacional?",
          answers: [
            { text: "MongoDB", correct: false },
            { text: "MySQL", correct: true },
            { text: "Redis", correct: false },
            { text: "Cassandra", correct: false }
          ],
          explanation: "MySQL √© um banco de dados relacional."
        }
      ],
      dificil: [
        {
          question: "O que √© 'closure' em JavaScript?",
          answers: [
            { text: "Uma fun√ß√£o com acesso ao escopo l√©xico externo", correct: true },
            { text: "Um erro de compila√ß√£o", correct: false },
            { text: "Um tipo de dado", correct: false },
            { text: "Um evento DOM", correct: false }
          ],
          explanation: "Closure √© uma fun√ß√£o que lembra seu escopo l√©xico."
        }
      ]
    },
    informatica: {
      facil: [
        {
          question: "O que significa 'CPU' em inform√°tica?",
          answers: [
            { text: "Central Processing Unit", correct: true },
            { text: "Computer Personal Unit", correct: false },
            { text: "Central Power Unit", correct: false },
            { text: "Computer Processing Unit", correct: false }
          ],
          explanation: "CPU significa Unidade Central de Processamento."
        },
        {
          question: "Qual sistema operacional √© da Microsoft?",
          answers: [
            { text: "Linux", correct: false },
            { text: "MacOS", correct: false },
            { text: "Windows", correct: true },
            { text: "Unix", correct: false }
          ],
          explanation: "Windows √© sistema operacional da Microsoft."
        }
      ],
      medio: [
        {
          question: "Qual a fun√ß√£o da mem√≥ria RAM?",
          answers: [
            { text: "Armazenar dados permanentemente", correct: false },
            { text: "Armazenar dados temporariamente para acesso r√°pido", correct: true },
            { text: "Processar dados", correct: false },
            { text: "Gerenciar conex√µes de rede", correct: false }
          ],
          explanation: "RAM armazena dados temporariamente para acesso r√°pido."
        }
      ],
      dificil: [
        {
          question: "O que √© overclocking?",
          answers: [
            { text: "Aumento da velocidade do processador al√©m do padr√£o", correct: true },
            { text: "Refrigera√ß√£o l√≠quida do PC", correct: false },
            { text: "Atualiza√ß√£o do sistema operacional", correct: false },
            { text: "Instala√ß√£o de software antiv√≠rus", correct: false }
          ],
          explanation: "Overclocking √© acelerar o processador al√©m do padr√£o."
        }
      ]
    }
  };

  let currentCategory = null;
  let currentDifficulty = null;
  let currentQuestions = [];
  let currentIndex = 0;
  let score = 0;
  let lives = 3;
  let timerDuration = 30; // segundos por pergunta
  let timeLeft = timerDuration;
  let timerInterval = null;
  let selectedAnswerIndex = null;

  function startQuiz() {
    currentCategory = document.getElementById('category').value;
    currentDifficulty = document.getElementById('difficulty').value;
    currentQuestions = questions[currentCategory][currentDifficulty];
    currentIndex = 0;
    score = 0;
    lives = 3;
    timeLeft = timerDuration;
    selectedAnswerIndex = null;

    updateLives();
    updateScore();
    startScreen.classList.remove('active');
    endScreen.classList.remove('active');
    quizScreen.classList.add('active');

    showQuestion();
    startTimer();
    mascotEl.textContent = "üòê";
  }

  function showQuestion() {
    clearInterval(timerInterval);
    timeLeft = timerDuration;
    updateTimerUI();

    const question = currentQuestions[currentIndex];
    questionEl.textContent = question.question;
    explanationEl.textContent = "";
    explanationEl.classList.add('hidden');
    nextBtn.disabled = true;
    selectedAnswerIndex = null;

    // Limpar respostas anteriores
    answersEl.innerHTML = '';

    question.answers.forEach((answer, idx) => {
      const li = document.createElement('li');
      li.textContent = answer.text;
      li.dataset.index = idx;
      li.addEventListener('click', () => selectAnswer(idx));
      answersEl.appendChild(li);
    });

    updateProgress();
    startTimer();
  }

  function selectAnswer(idx) {
    if (selectedAnswerIndex !== null) return; // s√≥ permite selecionar uma vez

    selectedAnswerIndex = idx;

    const lis = answersEl.querySelectorAll('li');
    lis.forEach((li, i) => {
      li.classList.remove('selected');
      li.classList.remove('correct');
      li.classList.remove('wrong');
      li.style.cursor = 'default';
    });

    lis[idx].classList.add('selected');

    nextBtn.disabled = false;
  }

  function showAnswerAndExplanation() {
    clearInterval(timerInterval);

    const question = currentQuestions[currentIndex];
    const lis = answersEl.querySelectorAll('li');

    lis.forEach((li, i) => {
      li.style.cursor = 'default';
      if (question.answers[i].correct) {
        li.classList.add('correct');
      }
      if (i === selectedAnswerIndex && !question.answers[i].correct) {
        li.classList.add('wrong');
      }
    });

    explanationEl.textContent = question.explanation;
    explanationEl.classList.remove('hidden');

    // Atualiza score e vidas
    if (selectedAnswerIndex !== null && question.answers[selectedAnswerIndex].correct) {
      score += 10;
      mascotEl.textContent = "üòÉ";
    } else {
      lives--;
      mascotEl.textContent = "üòû";
      updateLives();
    }
    updateScore();

    nextBtn.disabled = false;
  }

  function nextQuestion() {
    // S√≥ pode avan√ßar se j√° tiver escolhido (bot√£o habilitado)
    if (nextBtn.disabled) return;

    showAnswerAndExplanation();

    nextBtn.textContent = "Continuar";

    nextBtn.onclick = () => {
      currentIndex++;
      if (currentIndex >= currentQuestions.length || lives <= 0) {
        finishQuiz();
      } else {
        nextBtn.textContent = "Pr√≥xima";
        showQuestion();
      }
    }
  }

  function finishQuiz() {
    clearInterval(timerInterval);
    quizScreen.classList.remove('active');
    endScreen.classList.add('active');
    document.getElementById('final-score').textContent = Sua pontua√ß√£o: ${score};
    document.getElementById('ranking').textContent = getRanking();
  }

  function getRanking() {
    if (score >= currentQuestions.length * 10) return "üèÜ Excelente!";
    if (score >= currentQuestions.length * 7) return "üëç Bom trabalho!";
    if (score >= currentQuestions.length * 4) return "üôÇ Pode melhorar!";
    return "üòû Tente novamente!";
  }

  function updateLives() {
    livesEl.textContent = "‚ù§".repeat(lives);
    if (lives <= 0) {
      finishQuiz();
    }
  }

  function updateScore() {
    scoreEl.textContent = Pontos: ${score};
  }

  function updateProgress() {
    const progressPercent = ((currentIndex) / currentQuestions.length) * 100;
    document.getElementById('progress').style.width = ${progressPercent}%;
  }

  function startTimer() {
    clearInterval(timerInterval);
    timeLeft = timerDuration;
    updateTimerUI();
    timeWarningEl.classList.add('hidden');
    tenseSound.pause();
    tenseSound.currentTime = 0;

    timerInterval = setInterval(() => {
      timeLeft--;
      updateTimerUI();

      if (timeLeft <= 10) {
        timeFillEl.style.backgroundColor = 'orange';
        timeWarningEl.classList.remove('hidden');
        if (timeLeft === 10) {
          tenseSound.play();
          mascotEl.textContent = "üò∞";
        }
      }

      if (timeLeft <= 5) {
        timeFillEl.style.backgroundColor = 'red';
        mascotEl.textContent = "üò±";
      }

      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        timeWarningEl.classList.add('hidden');
        tenseSound.pause();
        tenseSound.currentTime = 0;
        mascotEl.textContent = "üòû";

        // Sem resposta no tempo -> vida perdida
        lives--;
        updateLives();

        // Mostrar resposta correta
        showAnswerAndExplanation();

        // Desabilita sele√ß√£o ao estourar o tempo
        nextBtn.disabled = false;

        // Remove evento antigo para n√£o duplicar
        nextBtn.onclick = () => {
          currentIndex++;
          if (currentIndex >= currentQuestions.length || lives <= 0) {
            finishQuiz();
          } else {
            nextBtn.textContent = "Pr√≥xima";
            showQuestion();
          }
        };
      }
    }, 1000);
  }

  function updateTimerUI() {
    timerEl.textContent = ‚è± ${timeLeft}s;
    const percent = (timeLeft / timerDuration) * 100;
    timeFillEl.style.width = ${percent}%;
    if (timeLeft > 10) {
      timeFillEl.style.backgroundColor = 'limegreen';
      timeWarningEl.classList.add('hidden');
    }
  }

  // Eventos dos bot√µes
  startBtn.addEventListener('click', startQuiz);

  nextBtn.addEventListener('click', () => {
    if (nextBtn.textContent === 'Pr√≥xima') {
      if (selectedAnswerIndex === null) {
        alert('Por favor, selecione uma resposta antes de continuar!');
        return;
      }
      showAnswerAndExplanation();
      nextBtn.textContent = 'Continuar';
    } else if (nextBtn.textContent === 'Continuar') {
      currentIndex++;
      if (currentIndex >= currentQuestions.length || lives <= 0) {
        finishQuiz();
      } else {
        showQuestion();
        nextBtn.textContent = 'Pr√≥xima';
        nextBtn.disabled = true;
      }
    }
  });

  restartBtn.addEventListener('click', () => {
    endScreen.classList.remove('active');
    startScreen.classList.add('active');
    mascotEl.textContent = "üòê";
  });
</script>
</body>
</html>
